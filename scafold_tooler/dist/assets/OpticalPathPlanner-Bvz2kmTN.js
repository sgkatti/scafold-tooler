import{r,j as e,m as P}from"./index-D4MKKhwQ.js";import{d as B}from"./algorithms-CGwSy85u.js";const M=[{id:"A",label:"Node A"},{id:"B",label:"Node B"},{id:"C",label:"Node C"},{id:"D",label:"Node D"},{id:"E",label:"Node E"}],_=[{a:"A",b:"B",length_km:120},{a:"B",b:"C",length_km:80},{a:"C",b:"D",length_km:150},{a:"B",b:"D",length_km:200},{a:"D",b:"E",length_km:60}],l={nodes:M,links:_},O=()=>{const[p,y]=r.useState(l.nodes[0].id),[u,k]=r.useState(l.nodes[1].id),[b,f]=r.useState(0),[g,v]=r.useState(.22),[A,E]=r.useState(20),[S,F]=r.useState(4),[j,D]=r.useState(80),[x,w]=r.useState(18),[t,N]=r.useState(null),C=()=>{const s=B(l.nodes,l.links,p,u);if(!s){N(null);return}const d=s.distance,n=Math.max(0,Math.ceil(d/j)-1),a=d*g,i=-58,m=S*(n||1),o=a*.1,h=b-(i+m+o);N({path:s.path,distance:d,amps:n,totalLoss:a,osnrMargin:h})},c=(()=>{const s=l.nodes.length,d=260,n=160,a=100,i={};return l.nodes.forEach((m,o)=>{const h=o/s*Math.PI*2-Math.PI/2;i[m.id]={x:d+Math.cos(h)*a,y:n+Math.sin(h)*a}}),i})();return e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"Source"}),e.jsx("select",{value:p,onChange:s=>y(s.target.value),className:"mt-1 px-3 py-2 rounded border w-full",children:l.nodes.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"Destination"}),e.jsx("select",{value:u,onChange:s=>k(s.target.value),className:"mt-1 px-3 py-2 rounded border w-full",children:l.nodes.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"Launch power (dBm)"}),e.jsx("input",{type:"number",value:b,onChange:s=>f(Number(s.target.value)),className:"mt-1 p-2 rounded border w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"Fiber loss (dB/km)"}),e.jsx("input",{type:"number",step:"0.01",value:g,onChange:s=>v(Number(s.target.value)),className:"mt-1 p-2 rounded border w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"Span length (km)"}),e.jsx("input",{type:"number",value:j,onChange:s=>D(Number(s.target.value)),className:"mt-1 p-2 rounded border w-full"})]})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("button",{onClick:C,className:"px-4 py-2 bg-teal-500 text-white rounded",children:"Plan"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["OSNR threshold (dB): ",e.jsx("input",{type:"number",value:x,onChange:s=>w(Number(s.target.value)),className:"ml-2 w-20 p-1 rounded border"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded shadow",children:[e.jsx("h3",{className:"font-semibold",children:"Suggested Path"}),t?e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("p",{className:"text-sm",children:["Path: ",t.path.join(" → ")]}),e.jsxs("p",{className:"text-sm",children:["Distance: ",t.distance.toFixed(1)," km"]}),e.jsxs("p",{className:"text-sm",children:["Amplifiers (approx): ",t.amps]}),e.jsxs("p",{className:"text-sm",children:["Total fiber loss: ",t.totalLoss.toFixed(2)," dB"]}),e.jsxs("p",{className:`text-sm ${t.osnrMargin<x?"text-red-500":"text-teal-500"}`,children:["Estimated OSNR margin (mock): ",t.osnrMargin.toFixed(2)," dB"]}),e.jsxs("p",{className:"text-sm",children:["Regen required: ",t.osnrMargin<x?"Yes":"No"]})]}):e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"No path planned yet — click Plan."})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded shadow mt-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Network diagram (mock)"}),e.jsxs("svg",{width:520,height:320,className:"mx-auto",children:[l.links.map((s,d)=>{const n=c[s.a],a=c[s.b],i=t&&t.path&&t.path.some((m,o)=>t.path[o]===s.a&&t.path[o+1]===s.b)||t&&t.path&&t.path.some((m,o)=>t.path[o]===s.b&&t.path[o+1]===s.a);return e.jsxs("g",{children:[e.jsx("line",{x1:n.x,y1:n.y,x2:a.x,y2:a.y,stroke:i?"#06b6d4":"#cbd5e1",strokeWidth:i?3:1.5}),e.jsxs("text",{x:(n.x+a.x)/2,y:(n.y+a.y)/2-6,fontSize:10,fill:"#475569",children:[s.length_km," km"]})]},d)}),l.nodes.map((s,d)=>e.jsxs("g",{children:[e.jsx("circle",{cx:c[s.id].x,cy:c[s.id].y,r:18,fill:"#ffffff",stroke:"#0ea5a4"}),e.jsx("text",{x:c[s.id].x,y:c[s.id].y+4,fontSize:10,textAnchor:"middle",children:s.id})]},s.id))]})]})]})};export{O as default};
